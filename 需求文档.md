# PetCraft Studio - 宠物插画创作平台需求文档

## 📋 文档信息
- **文档版本**: v1.0
- **创建日期**: 2025-10-31
- **文档类型**: 项目需求文档
- **编写视角**: 产品经理视角
- **目标读者**: 开发团队、产品经理、设计师

## 🎯 项目概述

### 项目愿景
构建一个革命性的宠物插画创作平台，让用户无需绘画技能即可通过组合不同组件来创建独特的宠物插画。

### 核心价值主张
- **零基础创作**: 无需绘画技能，通过拖拽组合即可创建精美插画
- **组件化设计**: 丰富的宠物组件库，支持个性化定制
- **社区分享**: 分享作品，获得点赞和评论，构建创作社区
- **云端同步**: 支持多设备同步，随时随地继续创作

## 🏗️ 系统架构设计

### 整体架构图
```
┌─────────────────────────────────────────────────────────────┐
│                    前端应用层 (Next.js + React)               │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │   认证模块   │  │  编辑器模块  │  │  画廊模块   │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│  │  个人作品   │  │  社区互动   │  │  数据管理   │          │
│  └─────────────┘  └─────────────┘  └─────────────┘          │
├─────────────────────────────────────────────────────────────┤
│                    API接口层 (Next.js API Routes)           │
├─────────────────────────────────────────────────────────────┤
│                 数据存储层 (Supabase + PostgreSQL)          │
└─────────────────────────────────────────────────────────────┘
```

### 技术架构特点
- **前端**: Next.js 15 + React 19 + TypeScript + Tailwind CSS
- **UI组件**: Radix UI + 自定义组件库
- **后端**: Next.js API Routes
- **数据库**: Supabase (PostgreSQL + 实时订阅 + 认证)
- **部署**: Vercel (前端) + Supabase (后端)

## 🧩 核心功能模块

### 1. 用户认证系统
- **注册/登录**: 邮箱密码认证
- **会话管理**: JWT令牌认证
- **用户资料**: 基本信息管理
- **权限控制**: 基于角色的访问控制

### 2. 插画编辑器
- **组件选择**: 7大类组件（身体、耳朵、眼睛、鼻子、嘴巴、配饰、背景）
- **颜色定制**: 支持自定义颜色，预设调色板
- **实时预览**: SVG实时渲染，所见即所得
- **保存管理**: 支持草稿保存和版本管理

### 3. 作品管理
- **个人作品库**: 查看、编辑、删除个人作品
- **公开/私有**: 控制作品可见性
- **作品统计**: 点赞数、评论数、创建时间
- **批量操作**: 批量删除、批量设置可见性

### 4. 社区画廊
- **作品展示**: 网格布局展示公开作品
- **互动功能**: 点赞、评论、分享
- **搜索筛选**: 按标签、作者、时间筛选
- **热门排行**: 按点赞数、评论数排序

### 5. 社交互动
- **点赞系统**: 支持点赞/取消点赞
- **评论功能**: 支持多级评论回复
- **分享功能**: 生成分享链接
- **用户关注**: 关注其他创作者

## 🎨 用户界面设计

### 设计原则
- **简洁直观**: 减少认知负担，专注于创作
- **响应式设计**: 适配桌面、平板、手机
- **渐进式披露**: 按需显示功能，避免界面复杂
- **实时反馈**: 即时响应用户操作

### 核心页面设计

#### 1. 首页 (Homepage)
- **英雄区域**: 项目介绍和快速入口
- **功能展示**: 创作流程说明
- **行动号召**: 开始创作按钮

#### 2. 编辑器页面 (Editor)
- **画布区域**: 中央SVG预览
- **组件面板**: 分类组件选择
- **颜色控制**: 颜色选择器
- **保存操作**: 保存、下载、分享

#### 3. 个人作品页面 (My Designs)
- **作品网格**: 卡片式作品展示
- **统计信息**: 作品数、点赞数、评论数
- **操作菜单**: 编辑、删除、设置可见性

#### 4. 社区画廊 (Gallery)
- **瀑布流布局**: 响应式作品展示
- **筛选排序**: 按时间、热度筛选
- **作品详情**: 点击查看完整作品

## 🔧 技术实现细节

### 数据模型设计

#### 用户表 (users)
```typescript
interface User {
  id: string
  email: string
  name: string
  avatar_url?: string
  created_at: string
  updated_at: string
}
```

#### 设计表 (designs)
```typescript
interface Design {
  id: string
  title: string
  user_id: string
  components: {
    body: string
    ears: string
    eyes: string
    nose: string
    mouth: string
    accessories: string
    background: string
    bodyColor?: string
    earsColor?: string
    accessoriesColor?: string
  }
  is_public: boolean
  created_at: string
  likes_count: number
  comments_count: number
}
```

#### 组件表 (components)
```typescript
interface Component {
  id: string
  name: string
  type: "body" | "ears" | "eyes" | "nose" | "mouth" | "accessories" | "background"
  svg_data: string
  category: string
  tags: string[]
}
```

#### 点赞表 (likes)
```typescript
interface Like {
  id: string
  design_id: string
  user_id: string
  created_at: string
}
```

#### 评论表 (comments)
```typescript
interface Comment {
  id: string
  design_id: string
  user_id: string
  content: string
  created_at: string
  parent_id?: string // 支持回复功能
}
```

### API接口设计

#### 认证相关
- `POST /api/auth/signup` - 用户注册
- `POST /api/auth/signin` - 用户登录
- `POST /api/auth/signout` - 用户登出
- `GET /api/auth/session` - 获取会话信息

#### 设计相关
- `GET /api/designs` - 获取设计列表（支持筛选）
- `GET /api/designs/:id` - 获取单个设计
- `POST /api/designs` - 创建新设计
- `PUT /api/designs/:id` - 更新设计
- `DELETE /api/designs/:id` - 删除设计

#### 组件相关
- `GET /api/components` - 获取所有组件
- `GET /api/components/:type` - 按类型获取组件

#### 互动相关
- `POST /api/likes` - 点赞/取消点赞
- `GET /api/likes` - 获取点赞状态
- `GET /api/comments` - 获取评论列表
- `POST /api/comments` - 添加评论

### 前端架构

#### 组件结构
```
components/
├── ui/                    # 基础UI组件
│   ├── button.tsx
│   ├── card.tsx
│   ├── input.tsx
│   └── ...
├── navigation.tsx        # 导航组件
├── comment-section.tsx   # 评论组件
├── like-button.tsx       # 点赞组件
└── ...
```

#### 页面结构
```
app/
├── page.tsx              # 首页
├── editor/
│   └── page.tsx          # 编辑器页面
├── gallery/
│   └── page.tsx          # 画廊页面
├── my-designs/
│   └── page.tsx          # 个人作品页面
├── login/
│   └── page.tsx          # 登录页面
└── signup/
    └── page.tsx          # 注册页面
```

#### 状态管理
- **认证状态**: 使用React Context管理用户会话
- **设计数据**: 使用SWR或React Query进行数据获取和缓存
- **UI状态**: 使用React useState管理组件状态

## 🚀 性能优化策略

### 已实现的优化
- **批量查询优化**: 减少数据库查询次数
- **并发数据获取**: 使用Promise.all并行获取数据
- **缓存策略**: 实现数据缓存，避免重复请求
- **图片优化**: SVG格式，支持矢量缩放

### 前端优化
- **代码分割**: 按路由进行代码分割
- **懒加载**: 图片和组件懒加载
- **预加载**: 关键资源预加载
- **压缩优化**: 代码和资源压缩

### 后端优化
- **数据库索引**: 为常用查询字段创建索引
- **查询优化**: 只选择必要的字段
- **缓存策略**: Redis缓存热点数据
- **CDN加速**: 静态资源CDN分发

## 🔐 安全与权限设计

### 认证系统
- **Supabase Auth**: 邮箱密码认证
- **JWT令牌**: 安全的身份验证和会话管理
- **密码策略**: 密码强度要求和加密存储

### 权限控制
- **数据隔离**: 基于用户ID的数据访问控制
- **公开/私有**: 作品可见性控制
- **操作权限**: 编辑、删除权限验证

### 数据安全
- **RLS策略**: 数据库层面的行级安全控制
- **输入验证**: 前后端双重验证
- **XSS防护**: 内容安全策略
- **CSRF防护**: 令牌验证机制

## 📊 项目进度与里程碑

### 已完成功能 ✅
- [x] 用户认证系统（注册、登录、会话管理）
- [x] 插画编辑器核心功能
- [x] 组件选择和颜色定制
- [x] 作品保存和加载
- [x] 个人作品管理
- [x] 社区画廊展示
- [x] 点赞和评论功能
- [x] 响应式界面设计

### 进行中功能 🚧
- [ ] 用户关注系统
- [ ] 作品收藏功能
- [ ] 高级搜索和筛选
- [ ] 作品标签系统
- [ ] 用户个人资料页面

### 计划中功能 📋
- [ ] 移动端应用
- [ ] 离线创作功能
- [ ] AI辅助创作
- [ ] 作品导出多种格式
- [ ] 社交分享增强
- [ ] 数据分析仪表板

## 🎯 成功指标与评估

### 技术指标
- **页面加载时间**: 目标 < 1秒
- **API响应时间**: 目标 < 200ms
- **系统可用性**: 目标 99.9%
- **并发用户数**: 目标支持1000+并发用户

### 业务指标
- **用户注册数**: 月增长目标
- **日活跃用户**: 用户参与度指标
- **作品创建数**: 平台活跃度
- **用户留存率**: 长期使用指标

### 用户体验指标
- **用户满意度**: 基于用户反馈评分
- **功能使用率**: 各功能模块使用频率
- **错误率**: 系统错误和用户操作错误率
- **转化率**: 访客到注册用户的转化率

## 🔮 未来发展方向

### 短期目标 (3-6个月)
- 完善核心功能，提升用户体验
- 优化性能，提高系统稳定性
- 收集用户反馈，迭代产品功能
- 扩大用户基础，提升品牌知名度

### 中期目标 (6-12个月)
- 开发移动端应用
- 引入AI辅助创作功能
- 建立创作者生态系统
- 探索商业化模式

### 长期愿景 (1-3年)
- 成为宠物插画创作领域的领先平台
- 建立完整的创作者经济体系
- 拓展到其他创意领域
- 国际化发展

## 📝 总结

PetCraft Studio是一个创新的宠物插画创作平台，通过组件化的设计理念，让用户无需绘画技能即可创建独特的宠物插画。平台结合了创作工具和社交功能，为用户提供了一个完整的创作生态系统。

项目的技术架构基于现代化的Web技术栈，具有良好的可扩展性和维护性。通过持续的用户反馈和功能迭代，我们有信心将PetCraft Studio打造成为宠物插画创作领域的标杆产品。

---

**文档维护**: 产品团队  
**最后更新**: 2025-10-31  
**版本**: v1.0